window['onload']=function(){console['log']('Page:\x20'+site);switch(site){case'wahl':return a8();case'dashboard':return A();case'projektErstellung':return aU();case'closed':return d();default:return;}};function logout(){$('#logout')['submit']();}function d(){$('.modal')['modal']({'show':!![],'keyboard':![],'backdrop':'static'});$('#okbtn')['on']('click',function(){window['location']['href']='/';});}function e(f){var g=['<option\x20value=\x220\x22>#1\x20Nicht\x20veröffentlicht</option>','<option\x20value=\x221\x22>#2\x20Projekte\x20können\x20eingereicht\x20werden</option>','<option\x20value=\x222\x22>#3\x20Projekt-Einreichung\x20geschlossen</option>','<option\x20value=\x223\x22>#4\x20Wahl-Interface\x20geöffnet</option>','<option\x20value=\x224\x22>#5\x20Wahlen\x20abgeschlossen</option>'];$('#stageSelect')['append']($(g[f]));for(var h=0x0;h<0x5;h++){if(h==config['Stage']){continue;}$('#stageSelect')['append']($(g[h]));}}function i(){$('#montag')['prop']('checked',config['Montag']);if(config['Stage']!=0x0){$('#montag')['prop']('disabled',!![]);$('#montag')['addClass']('disabled');}$('#dienstag')['prop']('checked',config['Dienstag']);if(config['Stage']!=0x0){$('#dienstag')['prop']('disabled',!![]);$('#dienstag')['addClass']('disabled');}$('#Mittwoch')['prop']('checked',config['Mittwoch']);if(config['Stage']!=0x0){$('#mittwoch')['prop']('disabled',!![]);$('#mittwoch')['addClass']('disabled');}$('#donnerstag')['prop']('checked',config['Donnerstag']);if(config['Stage']!=0x0){$('#donnerstag')['prop']('disabled',!![]);$('#donnerstag')['addClass']('disabled');}$('#freitag')['prop']('checked',config['Freitag']);if(config['Stage']!=0x0){$('#freitag')['prop']('disabled',!![]);$('#freitag')['addClass']('disabled');}}function j(){config['SchuleAmErstenVormittag']=config['SchuleAmErstenVormittag']=='true';$('#firstDaytrue')['prop']('checked',config['SchuleAmErstenVormittag']);if(config['Stage']!=0x0){$('#firstDaytrue')['prop']('disabled',!![]);$('#firstDaytrue')['addClass']('disabled');$('#firstDayfalse')['prop']('disabled',!![]);$('#firstDayfalse')['addClass']('disabled');}}function k(l){console['log']('Creating:\x20projekteTable');$['each'](l[0x0],function(m,n){$('#projekteTable>thead>tr')['append']($('<th>'+m+'</th>'));});$['each'](l,function(o,p){$('#projekteTable>tbody')['append']($('<tr></tr>'));$['each'](l[o],function(q,r){$('#projekteTable>tbody:last-child')['append']($('<td>'+r+'</td>'));});});}function s(t){console['log']('Creating:\x20schuelerTable');$['each'](schueler[0x0],function(u,v){$('#schuelerTable>thead>tr')['append']($('<th>'+u+'</th>'));});$['each'](schueler,function(w,x){$('#schuelerTable>tbody')['append']($('<tr></tr>'));$['each'](schueler[w],function(y,z){$('#schuelerTable>tbody:last-child')['append']($('<td>'+z+'</td>'));});});}function A(){console['log']('Current\x20Configuration:');console['log'](config);console['log'](projekte);console['log'](schueler);e(config['Stage']);$('#inputSchuelerAnzahl')['val'](parseInt(config['Schüleranzahl']));i();j();k(projekte);s(schueler);$('input:checkbox')['on']('click',function(B){B['stopImmediatePropagation']();var C=B['currentTarget']['checked']?![]:!![];B['currentTarget']['checked']=C?![]:C['toString']();});$('input:radio')['on']('click',function(D){D['stopImmediatePropagation']();var E=D['currentTarget']['checked']?![]:!![];D['currentTarget']['checked']=E?![]:E['toString']();});}function F(G){var H=new jsPDF('p','pt');var I=['Nr.','Projekttitel','Stufe'];var J=[];G['forEach'](function(K){J['push']([K['id'],K['name'],K['minKlasse']+'-'+K['maxKlasse']]);});H['autoTable'](I,J,{'tableLineColor':[0x2c,0x3e,0x50],'tableLineWidth':0.75,'styles':{'overflow':'linebreak','lineColor':[0x2c,0x3e,0x50],'lineWidth':0.05},'columnStyles':{0:{'columnWidth':0x19},1:{'columnWidth':0x1c7},2:{'columnWidth':0x23}}});H['output']('dataurlnewwindow');}var L=['primary','success','dark'];function M(N,O,P){var Q=N/O;if(Q<0.6)return 0x4;var R=(75.4745*Math['pow'](Q,0x4)-223.148*Math['pow'](Q,0x3)+246.143*Math['pow'](Q,0x2)-119.873*Q+21.8101)*P;console['log']('Schüler:\x20'+N+'\x20/\x20Plätze:\x20'+O+'\x20=\x20'+Q);console['log']('f('+Q+')\x20=\x20'+R);return R<0x4?0x4:R;}function S(T){$('.projektliste>div')['append']($('<div\x20class=\x22card\x20list-group-item-'+L[Math['floor'](Math['random']()*L['length'])]+'\x20projekt-card\x22\x20id=\x22drag'+T['projektId']+'\x22><input\x20\x20type=\x22hidden\x22value=\x22'+T['projektId']+'\x22><div\x20class=\x22card-body\x22><h5\x20class=\x22card-title\x22>'+T['name']+'</h5><a\x20href=\x22#\x22\x20class=\x22btn\x20btn-'+L[Math['floor'](Math['random']()*L['length'])]+'\x22\x20data-toggle=\x22modal\x22\x20data-target=\x22#modal'+T['projektId']+'\x22>Info</a></div></div>'));}function U(V){$('.modalHolder')['append']($('<div\x20class=\x22modal\x20fade\x22\x20id=\x22modal'+V['projektId']+'\x22\x20tabindex=\x22-1\x22\x20role=\x22dialog\x22\x20aria-labelledby=\x22modalLabel'+V['projektId']+'\x22\x20aria-hidden=\x22true\x22><div\x20class=\x22modal-dialog\x20modal-lg\x22\x20role=\x22document\x22><div\x20class=\x22modal-content\x22><div\x20class=\x22modal-header\x22><h5\x20class=\x22modal-title\x22\x20id=\x22modalLabel'+V['projektId']+'\x22>'+V['name']+'</h5><button\x20type=\x22button\x22\x20class=\x22close\x22\x20data-dismiss=\x22modal\x22\x20aria-label=\x22Close\x22><span\x20aria-hidden=\x22true\x22>&times;</span></button></div><div\x20class=\x22modal-body\x22><p>'+V['beschreibung']+'</p><p><b>Betreuer:</b>\x20'+V['betreuer']+'</p><p><b>Klassenstufe:</b>\x20'+V['minKlasse']+'-'+V['maxKlasse']+'</p><p><b>Teilnehmerzahl:</b>\x20'+V['minTeilnehmer']+'-'+V['maxTeilnehmer']+'</p><p><b>Kosten/Sonstiges:</b>\x20'+V['sonstiges']+'</p><p><b>Vorraussetungen:</b>\x20'+V['vorraussetzungen']+'</p><table\x20class=\x22table\x20table-hover\x20table-responsive\x20table-striped\x22><thead\x20class=\x22thead-dark\x22><tr><th\x20scope=\x22col\x22>Zeit</th><th\x20>Montag</th><th\x20>Dienstag</th><th\x20>Mittwoch</th><th\x20>Donnerstag</th><th\x20>Freitag</th></tr></thead><tbody><tr><th\x20scope=\x22row\x22>Vormittag</th><td>'+V['moVor']+'</td><td>'+V['diVor']+'</td><td>'+V['miVor']+'</td><td>'+V['doVor']+'</td><td>'+V['frVor']+'</td></tr><tr><th\x20scope=\x22row\x22>Mensa-Essen</th><td>'+V['moMensa']+'</td><td>'+V['diMensa']+'</td><td>'+V['miMensa']+'</td><td>'+V['doMensa']+'</td><td>Nein</td></tr><tr><th\x20scope=\x22row\x22>Nachmittag</th><td>'+V['moNach']+'</td><td>'+V['diNach']+'</td><td>'+V['miNach']+'</td><td>'+V['doNach']+'</td><td>'+V['frNach']+'</td></tr></tbody></table></div><div\x20class=\x22modal-footer\x22><button\x20type=\x22button\x22\x20class=\x22btn\x20btn-primary\x22\x20data-dismiss=\x22modal\x22>Close</button></div></div></div></div>'));}function W(X){for(var Y=0x0;Y<X;Y++){$('.wahlliste\x20tbody')['append']('<tr\x20id=\x27wahl'+Y+'\x27><th\x20scope=\x27row\x27>'+(Y+0x1)+'</th><td></td></tr>');}}function Z(){console['log']('counting\x20choosen\x20projekts');var a0=[];for(var a1=0x0;a1<$('.wahlliste\x20tbody>tr')['length'];a1++){if($('#wahl'+a1+'>td')['children']()['length']==0x0){if($('.btn-group')['children']()['length']>0x1){$($('.btn-group')['children']()[0x2])['remove']();}return;}else{a0['push']($($('#wahl'+a1+'>td')['children']()[0x0]));}}if($('.btn-group')['children']()['length']<0x2){$('.btn-group')['append']($('<button\x20class=\x27btn\x20btn-success\x27\x20name=\x27action\x27\x20value=\x27wahl\x27>Wahl\x20abschicken</button>')['on']('click',function(a2){$('.wahlliste>form')['empty']();for(var a3=0x0;a3<a0['length'];a3++){$('.wahlliste>form')['append']($('<input\x20type=\x27hidden\x27\x20name=\x27wahl['+a3+']\x27>')['val']($(a0[a3]['children']()[0x0])['val']()));console['log']('input\x20angehängt');}$('.wahlliste>form')['append']($('<input\x20type=\x27hidden\x27\x20name=\x27action\x27>')['val']('wahl'));$('.wahlliste>form')['submit']();}));}return;}function a4(a5){$(this)['on']('touchstart\x20touchmove\x20touchend',aC);$(this)['attr']('draggable','true');$(this)['on']('dragstart',al);$(this)['on']('dragover',aj);$(this)['on']('drop',an);}function a6(a7){$(this)['on']('drop',as);$(this)['on']('dragover',aj);}function a8(){W(M(0x32,0x46,0x14));projekte['forEach'](function(a9){S(a9);U(a9);});$('.card')['each'](a4);$('.wahlliste')['on']('drop',aq);$('.wahlliste')['on']('dragover',aj);$('.wahlliste\x20tbody>tr')['each'](a6);$('.projektliste')['on']('drop',au);$('.projektliste')['on']('dragover',aj);}function aa(ab,ac){console['log']('switch.....');var ad=-0x1,ae=-0x1;for(var af=0x0;af<$('.wahlliste\x20tbody>tr')['length'];af++){if($('#wahl'+af)['has'](ab)['length']||$('#wahl'+af)['is'](ab)){ad=af;}else if($('#wahl'+af)['has'](ac)['length']||$('#wahl'+af)['is'](ac)){ae=af;}}if(!$(ab)['hasClass']('card')){ab=$(ab)['find']('div')[0x0];console['log']('ele1:\x20no\x20card');}if(!$(ac)['hasClass']('card')){ac=$(ac)['find']('div')[0x0];console['log']('ele2:\x20no\x20card');}if(ab==ac){console['log']('mit\x20sich\x20selbst\x20vertauscht....');return;}if(ad>-0x1&&ae>-0x1){if(typeof ac!=='undefined'){$('#wahl'+ad)['children']()[0x1]['append'](ac);}if(typeof ab!=='undefined'){$('#wahl'+ae)['children']()[0x1]['append'](ab);}}else if(ad>-0x1){$('#wahl'+ad)['children']()[0x1]['append'](ac);if(typeof ab!=='undefined'){$('.projektliste>div')['append'](ab);}}else if(ae>-0x1){$('#wahl'+ae)['children']()[0x1]['append'](ab);if(typeof ac!=='undefined'){$('.projektliste>div')['append'](ac);}}}function ag(ah){for(var ai=$('.wahlliste\x20tbody>tr')['length']-0x1;ai>=0x0;ai--){if($('#wahl'+ai+'>td')['children']()['length']==0x0){$('#wahl'+ai+'>td')['append'](ah);}}}function aj(ak){ak['originalEvent']['stopPropagation']();ak['originalEvent']['preventDefault']();}function al(am){am['originalEvent']['stopPropagation']();if(am['originalEvent']['dataTransfer']){am['originalEvent']['dataTransfer']['setData']('Text',this['id']);}else{console['log']('!!------------------------!!');console['log']('DataTransfer\x20is\x20missing!!');}}function an(ao){aj(ao);var ap=$('#'+ao['originalEvent']['dataTransfer']['getData']('Text'))[0x0];console['log']('dropped\x20element\x20on\x20card');console['log'](ao['originalEvent']['currentTarget']);if($('.wahlliste')['has'](ao['originalEvent']['currentTarget'])['length']){console['log']('in\x20Wahlliste');aa(ap,ao['originalEvent']['currentTarget']);}else{console['log']('in\x20Projektliste');$(ao['originalEvent']['currentTarget'])['before'](ap);}Z();}function aq(ar){aj(ar);console['log']('dropped\x20element\x20on\x20wahlliste');console['log'](ar['originalEvent']['currentTarget']);ag($('#'+ar['originalEvent']['dataTransfer']['getData']('Text')));Z();}function as(at){aj(at);console['log']('dropped\x20element\x20on\x20tabelle');console['log'](at['originalEvent']['currentTarget']);aa($('#'+at['originalEvent']['dataTransfer']['getData']('Text'))[0x0],at['originalEvent']['currentTarget']);Z();}function au(av){aj(av);console['log']('dropped\x20element\x20on\x20projektliste');console['log'](av['originalEvent']['currentTarget']);$('.projektliste>div')['append']($('#'+av['originalEvent']['dataTransfer']['getData']('Text')));Z();}function aw(ax){for(aQ=0x0;aQ<$('div.card')['length'];aQ++){if($('div.card')[aQ]==ax||$($('div.card')[aQ])['has'](ax)['length']){return $('div.card')[aQ];}}return null;}function ay(az){for(aQ=0x0;aQ<projekte['length'];aQ++){if($('#drag'+projekte['projektId'])==$(az)||$('#drag'+projekte['projektId'])['has'](az)){return document['getElementById']('#drag'+projekte['projektId']);}}if($('.wahlliste')==$(az)||$('.wahlliste')['has'](az)){return document['getElementById']('wahlliste');}return document['getElementById']('projektliste');}function aA(aB){switch(aB){case'touchstart':return'dragstart';case'touchmove':return'dragover';case'touchend':return'drop';default:return null;}}function aC(aD){if(aD['changedTouches']['length']!=0x1)return;var aE=aD['changedTouches'][0x0];var aF=aw(aD['target']);if(!aF)return;if($(aF)['find']('a')[0x0]==aD['target'])return;$(aF)['css']({'top':aE['clientY']+0x5,'left':'calc('+aE['clientX']+'px\x20-\x207.5em)'});var aG=document['elementFromPoint'](aE['clientX'],aE['clientY']);var aH=ay(aG);var aI=aA(aD['type']);if(aI==null)return;if(aI=='dragstart'||aI=='drop'){$(aF)['toggleClass']('ghost');}if(aI=='drop'){$(aF)['css']({'top':'','left':''});}var aJ=new DataTransfer();aJ['setData']('Text',aF['id']);aJ['setDragImage'](aD['target'],aE['clientX'],aE['clientY']);var aK=new DragEvent(aI,{'view':window,'bubbles':!![],'cancelable':!![],'screenX':aE['screenX'],'screenY':aE['screenY'],'clientX':aE['clientX'],'clientY':aE['clientY'],'dataTransfer':aJ,'currentTarget':aH,'target':aG});if(aI=='drop'){aG['dispatchEvent'](aK);}else{aF['dispatchEvent'](aK);}aD['preventDefault']();}function aL(aM){return $('<div\x20class=\x22weekday\x22>\x20\x20<label>'+aM+'</label>\x20\x20<div\x20class=\x22form-group\x22>\x20\x20\x20\x20<label\x20for=\x22\x22>Vormittag</label>\x20\x20\x20\x20<textarea\x20class=\x22form-control\x22\x20id=\x22'+aM+'Vor\x22\x20placeholder=\x22\x22\x20required\x20rows=\x223\x22\x20name=\x22'+aM+'Vor\x22></textarea>\x20\x20\x20\x20<div\x20class=\x22invalid-feedback\x22>\x20\x20\x20\x20\x20\x20Ungültige\x20Eingabe\x20\x20\x20\x20</div>\x20\x20</div>\x20\x20<div\x20class=\x22form-check\x22>\x20\x20\x20\x20<input\x20class=\x22form-check-input\x22\x20type=\x22checkbox\x22\x20value=\x22ja\x22\x20checked\x20id=\x22'+aM+'Mensa\x22\x20name=\x22'+aM+'Mensa\x22>\x20\x20\x20\x20<label\x20class=\x22form-check-label\x22\x20for=\x22defaultCheck1\x22>\x20\x20\x20\x20\x20\x20Mensaessen\x20möglich\x20\x20\x20\x20</label>\x20\x20</div>\x20\x20<div\x20class=\x22form-group\x22>\x20\x20\x20\x20<label\x20for=\x22\x22>Nachmittag</label>\x20\x20\x20\x20<textarea\x20class=\x22form-control\x22\x20id=\x22'+aM+'Nach\x22\x20placeholder=\x22\x22\x20required\x20rows=\x223\x22\x20name=\x22'+aM+'Nach\x22></textarea>\x20\x20\x20\x20<div\x20class=\x22invalid-feedback\x22>\x20\x20\x20\x20\x20\x20Ungültige\x20Eingabe\x20\x20\x20\x20</div>\x20\x20</div></div>');}function aN(aO,aP){if(aO){$('#'+aP+'Vor')['prop']('disabled',!![]);$('#'+aP+'Vor')['addClass']('disabled');$('#'+aP+'Mensa')['prop']('disabled',!![]);$('#'+aP+'Mensa')['addClass']('disabled');$('#'+aP+'Nach')['prop']('disabled',!![]);$('#'+aP+'Nach')['addClass']('disabled');}}function i(){var aR=['Montag','Dienstag','Mittwoch','Donnerstag','Freitag'];var aS=['mo','di','mi','do','fr'];for(var aT=0x0;aT<aS['length'];aT++){$('#weekdays')['append'](aL(aS[aT]));aN(!config[aR[aT]],aS[aT]);}$('#frMensa')['prop']('checked',![]);$('#frMensa')['prop']('disabled',!![]);}function aU(){i();}(function(){'use strict';window['addEventListener']('load',function(){if(site!='projektErstellung')return;var aV=document['getElementsByClassName']('needs-validation');var aW=Array['prototype']['filter']['call'](aV,function(aX){aX['addEventListener']('submit',function(aY){if(!aX['checkValidity']()||!aZ()){aY['preventDefault']();aY['stopPropagation']();}aX['classList']['add']('was-validated');},![]);});},![]);}());function check(){var b0=parseInt($('#inputMinPlaetze')['val']())<=parseInt($('#inputMaxPlaetze')['val']());if(!b0){alert('Mindestanzahl\x20der\x20Teilnehmerplätze\x20kann\x20nicht\x20größer\x20sein\x20als\x20die\x20die\x20Maximalanzahl!');}var b1=parseInt($('#inputMinKlasse')['val']())<=parseInt($('#inputMaxKlasse')['val']());if(!b1){alert('Mindeststufe\x20der\x20Klassenstufe\x20kann\x20nicht\x20größer\x20sein\x20als\x20die\x20die\x20Maximalstufe!');}return b0&&b1;}
