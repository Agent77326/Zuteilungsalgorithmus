// read and load the existing confiuration into the website
window.onload = read_configuration;

// set the html UI values to the config values
function read_configuration() {
  console.log(a);
  // a is an array generated by php code and has the following structure
  // var a = ["schuelerAnzahl", "checkedMonday", ..., "checkedFriday", "firstDay"]

  $("#inputSchuelerAnzahl").val(parseInt(a['Sch√ºleranzahl']));

  // Wochentage:
  // convert the string into a bool
  a["Montag"] = (a["Montag"] == 'true');
  $("#montag").prop("checked", a["Montag"]);
  //disable projekt-settings, when inital phase is over
  if(a['Stage'] != 0){
    $("#montag").prop("disabled", true);
    $("#montag").addClass("disabled");
  }
  a["Dienstag"] = (a["Dienstag"] == 'true');
  $("#dienstag").prop("checked", a["Dienstag"]);
  //disable projekt-settings, when inital phase is over
  if(a['Stage'] != 0){
    $("#dienstag").prop("disabled", true);
    $("#dienstag").addClass("disabled");
  }
  a["Mittwoch"] = (a["Mittwoch"] == 'true');
  $("#Mittwoch").prop("checked", a["Mittwoch"]);
  //disable projekt-settings, when inital phase is over
  if(a['Stage'] != 0){
    $("#mittwoch").prop("disabled", true);
    $("#mittwoch").addClass("disabled");
  }
  a["Donnerstag"] = (a["Donnerstag"] == 'true');
  $("#donnerstag").prop("checked", a["Donnerstag"]);
  //disable projekt-settings, when inital phase is over
  if(a['Stage'] != 0){
    $("#donnerstag").prop("disabled", true);
    $("#donnerstag").addClass("disabled");
  }
  a["Freitag"] = (a["Freitag"] == 'true');
  $("#freitag").prop("checked", a["Freitag"]);
  //disable projekt-settings, when inital phase is over
  if(a['Stage'] != 0){
    $("#freitag").prop("disabled", true);
    $("#freitag").addClass("disabled");
  }

  // convert the string into a bool
  a["SchuleAmErstenVormittag"] = (a["SchuleAmErstenVormittag"] == 'true');
  $("#firstDaytrue").prop("checked", a["SchuleAmErstenVormittag"]);
  //disable projekt-settings, when inital phase is over
  if(a["Stage"] != 0){
    $("#firstDaytrue").prop("disabled", true);
    $("#firstDaytrue").addClass("disabled");
    $("#firstDayfalse").prop("disabled", true);
    $("#firstDayfalse").addClass("disabled");
  }
}

//We don't know why we need it, but now it works!!! Don't delete it !!!!!!!
$('input:checkbox').on('click', function(e) {
    e.stopImmediatePropagation();
    var checked = (e.currentTarget.checked) ? false : true;
    e.currentTarget.checked = (checked) ? false : checked.toString();
});

$('input:radio').on('click', function(e) {
    e.stopImmediatePropagation();
    var checked = (e.currentTarget.checked) ? false : true;
    e.currentTarget.checked = (checked) ? false : checked.toString();
});
